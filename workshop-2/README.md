# workshop-2

## –ì–µ–Ω—Ä–∞—Ü–∏—è go —Ñ–∞–π–ª–æ–≤ –∏–∑ proto —Ñ–∞–π–ª–æ–≤

### `protoc` 

–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä protobuf –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –∏–∑ proto-—Ñ–∞–π–ª–æ–≤

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞: https://grpc.io/docs/protoc-installation/
1. man pages: https://manpages.debian.org/testing/protobuf-compiler/protoc.1.en.html
1. –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
    - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–ª–∞–≥–∏–Ω—ã (—Å–º. _Makefile_ `.bin-deps`)
    - –ó–∞–≤–µ–Ω–¥–æ—Ä–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ `proto` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. _Makefile_ `.vendor-proto`)
    - –£–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—É—Ç–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ proto-—Ñ–∞–π–ª–æ–≤, –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –∏—Ö –æ–ø—Ü–∏–∏ –≤—ã–∑–æ–≤–∞ (—Å–º. Makefile `.protoc-generate`)
1. –í—ã–∑–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `make generate` (—Å–º. _Makefile_)

### `buf`

–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –∏–∑ proto —Ñ–∞–π–ª–æ–≤

1. –°–∞–π—Ç: https://buf.build/
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞: https://buf.build/docs/installation
1. –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
    - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `buf` (—Å–º. _Makefile_ `.bin-deps`)
    - –ó–∞–≤–µ–Ω–¥–æ—Ä–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ `proto` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. `buf.yaml`)
    - –£–∫–∞–∑–∞—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–ª–∞–≥–∏–Ω—ã –∏ –∏—Ö –æ–ø—Ü–∏–∏ –≤—ã–∑–æ–≤–∞ (—Å–º. `buf.gen.yaml`)
1. –í—ã–∑–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `make generate-buf` (—Å–º. _Makefile_)


## –ü–ª–∞–≥–∏–Ω—ã

### protoc-gen-go

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://pkg.go.dev/github.com/golang/protobuf/protoc-gen-go

–ü–ª–∞–≥–∏–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `go` —Ç–∏–ø–æ–≤ –∏–∑ `protobuf`. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.pb.go`.

### protoc-gen-go-grpc

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://pkg.go.dev/google.golang.org/grpc/cmd/protoc-gen-go-grpc

–ü–ª–∞–≥–∏–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `gRPC` –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ `go` –∏–∑ `protobuf`. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `_grpc.pb.go`.


### protoc-gen-grpc-gateway

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 
- https://pkg.go.dev/github.com/grpc-ecosystem/grpc-gateway/protoc-gen-grpc-gateway
- https://grpc-ecosystem.github.io/grpc-gateway/docs/tutorials/introduction/
- https://github.com/grpc-ecosystem/grpc-gateway


–ü–ª–∞–≥–∏–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ RESTful HTTP API –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ `go` –∏–∑ `protobuf`. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.pb.gw.go`.

### protoc-gen-openapiv2

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 
- https://pkg.go.dev/github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2
- https://grpc-ecosystem.github.io/grpc-gateway/docs/mapping/customizing_openapi_output/


–ü–ª–∞–≥–∏–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ openapiv2 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –≤–∞—à–µ–≥–æ RESTful HTTP API –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑ `protobuf`. –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.swagger.json`.


### protoc-gen-validate

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 
- https://pkg.go.dev/github.com/deelawn/protoc-gen-validation
- https://github.com/bufbuild/protoc-gen-validate/blob/main/docs.md


–ü–ª–∞–≥–∏–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–∞—à–∏—Ö `protobuf` —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ `go`.


## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ 2
–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å—ë –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ c —Å–µ—Ä–≤–∏—Å–∞–º–∏ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª gRPC.
–î–ª—è —ç—Ç–æ–≥–æ:
- –°–æ–∑–¥–∞—Ç—å protobuf –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
- –í –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ Makefile –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ .go —Ñ–∞–ª–π–ª–æ –∏–∑ proto —Ñ–∞–π–ª–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω—É–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å protoc –∏–ª–∏ buf –Ω–∞ –Ω–∞ —Å–≤–æ–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ).
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Ä–∞–Ω–µ–µ, –∑–∞–º–µ–Ω–∏–≤ —Å–ª–æ–π HTTP –Ω–∞ GRPC.
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ HTTP –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ gRPC.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ:
- –¥–æ–±–∞–≤–∏—Ç—å HTTP-gateway –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é protobuf —Å–æ–æ–±—â–µ–Ω–∏–π - 1üíé
- –¥–æ–±–∞–≤–∏—Ç—å swagger-ui –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–≤–µ—Ä—à–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏–∑ —Å–≤–∞–≥–≥–µ—Ä–∞ –∫ —Å–µ—Ä–≤–∏—Å—É (–ø–æ–¥–Ω—è—Ç—å swagger-ui —Å–µ—Ä–≤–µ—Ä) - 1üíé